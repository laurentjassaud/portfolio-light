<template>
    <div ref="about" class="about">
        <div class="vs-section">

            <div class="intro">
                <div class="fond_intro"></div>
                <div class="madein">
                    <h2 id="titre-about" class="nom fil random">
                        <div class="lien">Dark Muses Society</div>
                    </h2>
                    <div>
                        <div class="random">Made in<br />Switzerland</div>
                    </div>
                </div>
                <div class="ville">
                    <div class="random">Zurich</div>
                    <div id="inner_svg">
                        <svg id="d" width="8px" height="8px" viewBox="0 0 8 8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <title>d</title>
                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <g id="d" transform="translate(0.000000, -2.000000)" fill="#000000">
                                    <path d="M5.47,7.2 C5.5,6.73 5.5,5.99 5.47,5.51 C5.36,3.77 4.53,3.19 3.39,3.19 L3.16,3.19 C3.01,3.19 2.71,3.54 2.71,3.69 L2.71,9.02 C2.71,9.17 3.07,9.5 3.19,9.5 L3.43,9.5 C4.51,9.5 5.36,8.94 5.47,7.2 Z M7.16,6.34 C7.16,8.45 5.31,10 3.43,10 L0.4,10 L0.4,9.63 L0.56,9.63 C0.71,9.63 1.11,9.23 1.11,9.05 L1.11,3.67 C1.11,3.5 0.69,3.09 0.56,3.09 L0.4,3.09 L0.4,2.72 L3.41,2.72 C5.22,2.72 7.16,4.14 7.16,6.34 Z" id="D"></path>
                                </g>
                            </g>
                        </svg>
                        <svg id="e" width="7px" height="8px" viewBox="0 0 7 8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <title>e</title>
                            <desc>Created with Sketch.</desc>
                            <defs></defs>
                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <g id="e" transform="translate(0.000000, -2.000000)" fill="#000000">
                                    <path d="M6.08,2.72 L6.08,4.71 L5.71,4.71 C5.71,4.51 4.64,3.2 4.47,3.2 L2.9,3.2 C2.84,3.2 2.72,3.34 2.72,3.4 L2.72,6.03 L3.5,6.03 C3.65,6.03 4.31,5.43 4.31,5.28 L4.31,5.1 L4.73,5.1 L4.73,7.49 L4.31,7.49 L4.31,7.28 C4.31,7.12 3.65,6.52 3.5,6.52 L2.72,6.52 L2.72,9.28 C2.72,9.34 2.84,9.5 2.89,9.5 L4.47,9.5 C4.85,9.5 6.4,7.84 6.4,7.62 L6.8,7.62 L6.34,10 L0.41,10 L0.41,9.63 L0.59,9.63 C0.74,9.63 1.12,9.22 1.12,9.06 L1.12,3.69 C1.12,3.52 0.7,3.09 0.57,3.09 L0.4,3.09 L0.4,2.72 L6.08,2.72 Z" id="E"></path>
                                </g>
                            </g>
                        </svg>
                        <svg id="s" width="6px" height="9px" viewBox="0 0 6 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <title>S</title>
                            <desc>Created with Sketch.</desc>
                            <defs></defs>
                            <g id="Artboard-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(-862.000000, -399.000000)" font-family="LarishNeueSemibold-Regular, Larish Neue" font-size="10" font-weight="500">
                                <g id="SCroll-Copy" transform="translate(809.000000, 355.000000)" fill="#000000">
                                    <g id="Group-2">
                                        <text id="S">
                                            <tspan x="53" y="52">S</tspan>
                                        </text>
                                    </g>
                                </g>
                            </g>
                        </svg>
                        <svg id="i" width="4px" height="8px" viewBox="0 0 4 8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <title>i</title>
                            <desc>Created with Sketch.</desc>
                            <defs></defs>
                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <g id="i" transform="translate(0.000000, -2.000000)" fill="#000000">
                                    <path d="M3.7,10 L0.46,10 L0.46,9.63 L0.76,9.63 C0.9,9.63 1.31,9.19 1.31,9.03 L1.31,3.69 C1.31,3.54 0.89,3.09 0.75,3.09 L0.45,3.09 L0.45,2.72 L3.73,2.72 L3.73,3.09 L3.44,3.09 C3.29,3.09 2.87,3.54 2.87,3.69 L2.87,9.03 C2.87,9.19 3.26,9.63 3.41,9.63 L3.7,9.63 L3.7,10 Z" id="I"></path>
                                </g>
                            </g>
                        </svg>
                        <svg id="g" width="8px" height="9px" viewBox="0 0 8 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <title>g</title>
                            <desc>Created with Sketch.</desc>
                            <defs></defs>
                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <g id="g" transform="translate(0.000000, -2.000000)" fill="#000000">
                                    <path d="M4.12,3.1 C3.13,3.08 2.3,3.66 2.13,5.36 C2.07,5.97 2.07,6.66 2.14,7.28 C2.28,8.55 3.05,9.47 4.19,9.47 C4.89,9.47 5.37,9.09 5.52,8.74 L5.52,7.68 C5.52,7.54 5.11,7.09 5.02,7.09 L4.09,7.09 L4.09,6.7 L7.86,6.7 L7.86,7.08 L7.52,7.08 C7.43,7.08 7.01,7.52 7.01,7.66 L7.01,10 L6.92,10 L6.07,9.16 C5.69,9.67 5.08,10.13 4.14,10.13 C1.8,10.13 0.4,8.5 0.41,6.28 C0.42,4.13 1.86,2.51 4.02,2.59 C4.76,2.62 5.34,2.92 6.01,2.92 C6.17,2.92 6.37,2.86 6.47,2.72 L6.87,2.72 L6.87,5.21 L6.46,5.21 C6.46,4.85 5.37,3.13 4.12,3.1 Z" id="G"></path>
                                </g>
                            </g>
                        </svg>
                        <svg id="n" width="8px" height="9px" viewBox="0 0 8 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <title>n</title>
                            <desc>Created with Sketch.</desc>
                            <defs></defs>
                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <g id="n" transform="translate(0.000000, -2.000000)" fill="#000000">
                                    <path d="M6.96,3.77 L6.96,10.19 L1.88,4.1 L1.85,4.1 L1.85,8.87 C1.85,9.03 2.43,9.63 2.55,9.63 L2.92,9.63 L2.92,10 L0.4,10 L0.4,9.63 L0.54,9.63 C0.67,9.63 1.24,9.03 1.24,8.87 L1.24,3.75 C1.24,3.6 0.78,3.09 0.68,3.09 L0.52,3.09 L0.52,2.72 L2.71,2.72 L6.32,7.18 L6.37,7.18 L6.37,3.77 C6.37,3.61 5.88,3.09 5.76,3.09 L5.41,3.09 L5.41,2.72 L7.77,2.72 L7.77,3.09 L7.56,3.09 C7.43,3.09 6.96,3.61 6.96,3.77 Z" id="N"></path>
                                </g>
                            </g>
                        </svg>
                    </div>
                </div>
            </div>
            <div class="intro2">
                <div class="fond_intro"></div>
                <h1 class="random"><span id="scaleA">About</span></h1>
                <h2 class="random">I'm an art director currently working in Zurich</h2>
                <p class="random">
                    I'm Mustafa, a Turkish designer based in Zurich. 
                    I get inspired by novel ideas, original design and creativity. 
                    My work has been varied – from branding, print, apps, UX/UI, 
                    websites and digital tools – but always with a human-centered approach and a keen eye for detail. 
                    I like to take influences from nature, architecture and cinematography, 
                    and always lean towards minimalism and simplicity.
                    I'm glad to collaborate with many creative disciplines 
                    and offer a full range of production services in the design, lifestyle, arts, 
                    fashion and architecture industries. I'm a big typography lover and into minimal design. 
                    I aim for a high quality, polished product to achieve my clients goals. My work has been recognized on Awwwards, 
                    CSSDA and many more. Let's get in touch, for any project inquires or just drop me a message.
                </p>
            </div>

            <div class="sotd">
                <h3>Awards &amp; recognition</h3>
                <div><div>Mobile of the day</div><div>FWA</div><div>2018</div></div>
                <div><div>Site of the day</div><div>FWA</div><div>2018</div></div>
                <div><div>Site of the day</div><div>CSSDA</div><div>2017</div></div>
                <div><div>Site of the day</div><div>CSSDA</div><div>2018</div></div>
                <div><div>Site of the day</div><div>Awwwards</div><div>2018</div></div>
                <div><div>Site of the day</div><div>Awwwards</div><div>2017</div></div>
                <div><div>Interactive server</div><div>Behance</div><div>2017</div></div>
                <div><div>Interactive server</div><div>Behance</div><div>2017</div></div>
                <div><div>Interactive server</div><div>Behance</div><div>2016</div></div>
                <div><div>Interactive server</div><div>Behance</div><div>2016</div></div>
                <div><div>Interactive server</div><div>Behance</div><div>2015</div></div>
                <div><div>Designer of week</div><div>Commarts</div><div>2016</div></div>
            </div>
            <div class="reach">
                <h3>Reach me</h3>
                <a class="point2" href="mailto:mustcelik@gmail.com">Say Hi</a>
            </div>
            <div class="coded">
                <h3>Coded by</h3>
                <a class="point" target="_blank" href="http://www.michaelg.fr">Michaël Garcia</a>
            </div>
            <footer>
                <a class="point externe" target="_blank" href="https://www.behance.net/mustafacelik">Bh</a>
                <a class="point externe" target="_blank" href="https://www.facebook.com/themustafacelik">Fb</a>
                <a class="point externe" target="_blank" href="https://www.instagram.com/themustafacelik">In</a>
                <h3>CC</h3>
            </footer>
        </div>
	</div>
</template>

<script>

    import { TweenMax, TimelineMax } from 'gsap'
    import Scrollbar, { ScrollbarPlugin }  from 'smooth-scrollbar'
    import config from '../config.json'
    import { mapGetters, mapActions } from 'vuex' 
    import { EventBus } from '../event-bus.js'

    export default {

        name: 'about',

        data() {
            return { 
            }
        },

		components: {
        },

        created() {
            this.$parent.setHeaderBlack()
            document.getElementById('titre').style.display = 'none'
        },

        mounted() {
            console.log('################# ABOUT mounted #################') 
            this.addListeners() 
            if(!this.isFirstLoad) {
                this.init()
            }      
        },
       
        beforeDestroy() {
            EventBus.$off('SCROLL')
            EventBus.$off('GO_INTRO_COVER')  
            console.log('### ABOUT DESTROYED _____________________________')
        },
        
        computed: { 
            ...mapGetters({
                currentWork: 'currentWork',
                isFirstLoad: 'isFirstLoad'
            })
        },

		methods: {

			...mapActions({
                setCurrentWork: 'setCurrentWork'
            }),

            addListeners() {
                EventBus.$on('SCROLL', (direction) => this.deplaceElement(direction) ) 
                EventBus.$on('GO_INTRO_COVER', this.init)
                //EventBus.$on('RESIZE', this.resizeStage) 
            },

            init() {
                // GESTION du SCROLL
                this.workScrollBar = Scrollbar.init(
                    document.querySelector('.vs-section'),
                    { 
                        damping: .05
                    }
                )  
                
                this.$parent.page = 'about'
                this.intro()    
            },

            deplaceElement(direction) {

                const refContainer = document.querySelector('.scroll-content').getBoundingClientRect()
                if(refContainer.top === 0 && direction === 'prev') return

                const ecartPosition = direction === 'next' ? '+25px' : '-25px'  
                const rotation = direction === 'next' ? '-=60' : '+=60'             
                const rotationInterne = direction === 'next' ? '+=60' : '-=60'

                TweenMax.to('#scaleA', 0.7, {
                    scaleX: 0.95,
                    x: ecartPosition,
                    ease: Power0.easeNone
                })

                TweenMax.to('#scaleA', 0.7, {
                    scaleX: 1,
                    ease: Power0.easeNone,
                    delay: 0.7
                })

                TweenMax.to('#inner_svg', 1, {
                    rotation: rotation, 
                    ease: Linear.easeNone
                })

                TweenMax.to('#inner_svg svg', 1, {
                    rotation: rotationInterne, 
                    ease: Linear.easeNone
                })                    

            },

            intro() {
                const elements = document.querySelectorAll('.random')
                const introAnim = new TimelineMax()
                introAnim                
                    .to('#content', 0.3, {
                        opacity: 1, 
                        ease:Power2.easeOut
                    })
                    .to('.fond_intro', 0.6, {
                        css:{scaleX:1}, 
                        ease:Power2.easeOut                       
                    })
                    .staggerFrom(elements, 0.3, {
                        x: -12 + 'px', 
                        opacity: 0, 
                        ease:Power2.easeIn
                    }, 0.2)
                    .from('#inner_svg', 0.3, {
                        opacity: 0,
                        ease:Power2.easeIn
                    }, '-=0.2')
                    .fromTo('#inner_svg', 2, {
                        rotation:140
                    }, {
                        rotation: 0, 
                        ease: Power2.easeOut
                    }, '-=0.3')
                    .fromTo('#inner_svg img', 2, {
                        rotation:-140
                    }, {
                        rotation: 0, 
                        ease: Power2.easeOut                        
                    }, '-=2')
            },

            outro(forcedRout) {
                const elements = document.querySelectorAll('.random')
                const introAnim = new TimelineMax()
                introAnim                    
                    .to('#cover', 0.3, {
                        opacity: 0, 
                        ease:Power2.easeIn
                    })                    
                    .staggerTo(elements, 0.3, {
                        x: 12 + 'px', 
                        opacity: 0, 
                        ease:Power2.easeIn
                    }, 0.2, '-=0.3')   
                    .to('#content', 0.3, {
                        opacity: 0, 
                        ease:Power2.easeIn,
                        onComplete: () => {
                            document.getElementById('titre').style.display = 'block'

                            if(forcedRout) {
                                this.setCurrentWork(null)
                                this.$router.push('/')
                            }else{
                                if(this.$parent.from === 'work'){
                                    const element = config.content[this.currentWork]
                                    this.$router.push(`/work/${element.slug}`)
                                }else{
                                    this.$router.push('/')
                                }                                
                            }
                            
                            //this.$nextTick(() => EventBus.$emit('GO_INTRO_COVER'))
                            TweenMax.to('#content', 0.6, {
                                opacity: 1, 
                                ease:Power2.easeIn
                            })
                            TweenMax.to('#titre', 0.6, {
                                opacity: 1, 
                                ease:Power2.easeIn
                            })
                        }
                    }, '-=0.3')
            },
        }
    }

</script>

<style lang="scss" scoped>

    a {
        text-decoration: none;
    }

    .about{
        width: 100vw;
        position: fixed;
        height: 100vh;
        color: #262324;
        overflow: hidden;  
        z-index: 1; 
        text-align: left;
        .vs-section{
            position: relative;
            overflow-y: scroll;
            width: 100%;
            height: 100%;
            .nom {
                font: 500 normal 21px/21px 'Pridi';
                position: absolute;
                top: 7vw;
                left: calc(26vw - 6px);
            }
            #inner_svg {
                width: 65px;
                height: 65px;
                position: relative;
                margin-top: 120px;
                //opacity: 0;
                * {
                    position: absolute;
                    transform-origin: 50% 50%;
                }
                #d {
                    top: 0;
                    left: 29px;
                }                
                #e {
                    top: 15px;
                    right: 3px;
                }
                #s {
                    bottom: 15px;
                    right: 3px;
                }
                #i {
                    bottom: 0;
                    left: 30px;
                }
                #g {
                    bottom: 15px;
                    left: 3px;
                } 
                #n {
                    top: 15px;
                    left: 3px;
                }                                              
            }
        }
        .fond_intro {
            width: 87%;
            height: 100%;
            top: 0;
            left: 0;
            position: absolute;
            background: #DADADA;
            z-index: 1;
            transform-origin: 0 0;
            transform: scaleX(0);
        }
        .intro {
            position: relative;
            display: flex;
            padding: 16vw 0 0 0;

            .madein {
                padding: 0 0 0 26vw;
                flex: 1 1 auto;
                z-index: 2;
                &>div:first-child {
                    font: 400 normal 13px/23px 'Fira sans';
                }
            }
            .ville {
                flex: 0 0 36vw;
                font: 600 normal 24px/32px 'Fira sans';
                z-index: 2;
            }
        }
        .intro2 {
            position: relative;
            h1 {
                font: 500 normal 300px/300px 'Pridi';
                color: #F73F04;
                position: absolute;
                top: calc(100% + 252px);
                transform-origin: 0 0;
                transform: rotate(-90deg);
                left: calc(7.5vw + 60px);
                z-index: 2;
                span {
                    position: relative;
                    transform-origin: 50% 50%;
                    display: block;
                }
            }
            h2 {
                padding: 3.4vw 0 0 15%;
                width: 44%;
                text-align: right;
                font: 500 normal 45px/51px 'Pridi';
                position: relative;
                z-index: 2;
            }
            p {
                font: 400 normal 13px/28px 'Fira sans';
                padding: 7vw 22% 11vw 51%;
                z-index: 2;
                position: relative;
            }
        }
        .sotd {
            padding: 10vw 0 0 51%;
            font: 400 normal 13px/36px 'Fira sans';
            position: relative;
            h3 {
                position: absolute;
                font: 400 normal 13px/36px 'Fira sans';
                color: #ACACAC;
                right: calc(49% + 78px);
                white-space: nowrap;
            }
            &>div {
                display: flex;
                div:first-child {
                    flex: 0 0 152px;
                }
                div:nth-child(2) {
                    flex: 0 0 112px;
                }
                div:last-child {
                    flex: 0 0 auto;
                    color: #9E9E9E;
                    font-size: 10px;
                    position: relative;
                    transform: translateY(1px);
                }
            }
        }
        .reach {
            padding: 18vw 0 0 calc(51% - 6px);
            position: relative;
            h3 {
                position: absolute;
                font: 400 normal 13px/36px 'Fira sans';
                color: #ACACAC;
                right: calc(49% + 78px);
                white-space: nowrap;
                top: calc(18vw + 12px);
            }
            a {
                font: 500 normal 50px/50px 'Pridi';
                color: #000;
                padding: 6px;
                position: relative;
            }
            .point2::after {
                content: "";
                width: 6px;
                height: 6px;
                background: #000;
                border-radius: 100%;
                position: absolute;
                top: calc(100% + 20px);
                left: 7px;
                pointer-events: none;
                opacity: 0;
                transform-origin: 0 100%;
                transform: scaleY(5);
                transition: 0.1s;
            }
            .point2:hover::after {
                opacity: 1;
                transform: scaleY(1);
            }
        }
        .coded {
            padding: 9vw 0 0 calc(51% - 6px);
            position: relative;
            h3 {
                position: absolute;
                font: 400 normal 13px/36px 'Fira sans';
                color: #ACACAC;
                right: calc(49% + 78px);
                white-space: nowrap;
                top: calc(9vw + 5px);
            }
            a {
                color: #000;
                padding: 6px;
                position: relative;
                font: 400 normal 13px/36px 'Fira sans';
            }
        }  
        footer {
            font-size: 0;
            padding: 9vw 0 5vw calc(51% - 15px);
            position: relative;
            overflow: hidden;
            a {
                display: inline-block;
                font: 400 normal 13px/13px 'Fira sans';
                color: #ACACAC;
                position: relative;
                padding: 6px 15px;
                z-index: 10;
            }   
            .point::after{
                left: 17px;
            }  
            h3 {
                color: #F73F04;
                position: absolute;
                right: -86px;
                bottom: -166px;
                font: 500 normal 288px/288px 'Pridi';
                z-index: 9;
            }       
        }   
        .point {
            transition: 1s;
            transition-property: color;
        }
        .point::after {
            content: "";
            width: 3px;
            height: 3px;
            background: #000;
            border-radius: 100%;
            position: absolute;
            top: calc(100% + 12px);
            left: 7px;
            pointer-events: none;
            opacity: 0;
            transform-origin: 0 100%;
            transform: scaleY(5);
            transition-property: opacity, transform;
            transition-duration: 0.1s, 0.1s;
        }
        .point:hover::after {
            opacity: 1;
            transform: scaleY(1);
        }               
        .point.noir {
            color: #000;
        }
    }



</style>